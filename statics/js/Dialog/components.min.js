/*! ComponentManager */
(function(){var e=window.Cms,a={},d;a.idSeed={};d=a.compCache=new e.DataCollection();a.add=a.register=function(g,f){if(typeof(g)!="string"){f=g;g=f.id}var h=d.get(g);if(h&&h!=f){if(!h.isDestroyed&&h.destroy&&h.el&&e.Dom.isRemoved(h.el)){h.destroy()}}d.add(g,f)};a.remove=a.unregister=function(f){if(typeof(f)!="string"){f=f.id}d.remove(f)};a.getById=function(f){return d.get(f)};a.getByDom=function(g,f){g=e.getDom(g);if(g&&g._components){return a.getById(e.getDom(g)._components[f])}};a.get=function(f,g){if(g){return a.getByDom(f,g)}else{return a.getById(f)}};a._unload=function(){var g,f;for(g in d.map){if(d.map.hasOwnProperty(g)){f=d.map[g];if(f&&f.destroy&&!f.isDestroyed){f.destroy()}}}d.clear()};a.destroyByDom=function(h){if(h.nodeName&&h.nodeType){h=[h]}var k,g;for(var j=0,f=h.length;j<f;j++){k=h[j].compId;g=k&&d.get(k);if(g&&g.destroy&&!g.isDestroyed){g.destroy()}}};a.initComponent=function(g,f){f=f||g.getAttribute("ztype");if(!f){return}switch(f.toLowerCase()){case"input":if(e.UI){e.UI.initCtrl(g)}break;case"verify":if(e.Verify){e.Verify.initCtrl(g)}break;case"date":case"time":case"datetime":if(!jQuery.bootstrapFlag&&e.DatePicker){new e.DatePicker(g)}break;case"number":if(e.NumberField){new e.NumberField(g)}break;case"combox":if(e.Combox){new e.Combox(g)}break;case"suggest":if(e.Suggest){new e.Suggest(g)}break;default:}g=null};a.initChildren=function(n){n=e.getDom(n);var h=[],g=[],k=[],j,m;if(n.canHaveChildren){h=n.getElementsByTagName("input");g=n.getElementsByTagName("textarea");k=n.getElementsByTagName("select")}else{if(n.tagName=="INPUT"){h=[n]}else{if(n.tagName=="TEXTAREA"){g=[n]}else{if(n.tagName=="SELECT"){k=[n]}else{return}}}}var o,f;for(j=0,len=h.length;j<len;j++){m=h[j];if(e.UI){e.UI.initCtrl(m)}f=m.getAttribute("ztype");if(f){a.initComponent(m,f)}o=m.getAttribute("verify");if(o){a.initComponent(m,"verify")}}for(j=0,len=g.length;j<len;j++){m=g[j];if(e.UI){e.UI.initCtrl(m)}o=m.getAttribute("verify");if(o){a.initComponent(m,"verify")}}for(j=0,len=k.length;j<len;j++){m=k[j];if(e.UI){e.UI.initCtrl(m)}f=m.getAttribute("ztype");if(f){a.initComponent(m,f)}o=m.getAttribute("verify");if(o){a.initComponent(m,"verify")}}m=null};var c={};var b={};e.PluginManager={registerPlugin:function(g,f){b[g]=f;f.ptype=g},createPlugin:function(g,h){var f=b[g.ptype||h];if(f.init){return f}else{return new f(g)}}};e.Page.onReady(function(){a.initChildren(document.body)},1);$(document).on("pageshow",".ui-page",function(f){a.initChildren(f.target)});e.ComponentManager=a;e.compCache=d})();(function(){var a=window.Cms;a.UICompBase=function(c){this.defaultConfig=this.defaultConfig||{dom:{},bubbleEvents:[]};a.mix(this,this.defaultConfig);c=c||{};a.Observable(this);this.addEvents("disable","enable","beforeshow","show","beforehide","hide","beforerender","render","afterrender","beforedestroy","destroy","resize","move");if(a.isElement(c)||typeof c=="string"){c=this.initFromDom(c)||{}}this.initialConfig=this.initialConfig||c;a.mix(this,c);if(c.el){this.el=a.getDom(c.el);if(this.el&&this.el.nodeType){this.ownerDocument=this.el.ownerDocument;this.ownerWindow=this.ownerDocument.parentWindow;this.$el=this.ownerWindow.$(this.el)}else{if(!this.el){window.console&&console.error(this.ctype+"- 找不到参数"+c.el+"对应的页面元素！");console.error(this.ctype+"- 找不到参数"+c.el+"对应的页面元素！");return}}this.id=this.ctype+"_"+a.id(this.el);this.el._components=this.el._components||{};if(this.el._components[this.ctype]==this.id){console.log(this.el,"被多次初始化",this.ctype,"，请检查代码是否会造成错误。");return a.ComponentManager.getById(this.id)}this.el._components[this.ctype]=this.id;if(this.el&&!this.outerEl){this.outerEl=a.getDom(this.el.id+this.outerElIdPostfix);if(!this.outerEl){this.outerEl=this.el}this.$outerEl=this.ownerWindow.$(this.outerEl)}this.rendered=true}this.getId();if(this.statable){a.Statable(this)}a.DataGSetter(this);if(this.plugins){if(a.isArray(this.plugins)){for(var d=0,b=this.plugins.length;d<b;d++){this.plugins[d]=this.initPlugin(this.plugins[d])}}else{this.plugins=this.initPlugin(this.plugins)}}this.initComponent();if(this.renderTo){this.render(this.renderTo);delete this.renderTo}a.ComponentManager.register(this);if(this.autoShow){this.show()}};a.UICompBase.prototype={ctype:"UICompBase",id:null,disabled:false,hidden:false,floating:false,autoShow:false,rendered:false,cls:"",style:null,outerElAttrs:{tag:"div"},outerElIdPostfix:"_outer",disabledClass:"z-disabled",hiddenClass:"z-hidden",renderTpl:'<div id="{id}_body"></div>',contentTpl:null,ctCls:null,baseCls:null,cmpCls:null,statable:false,defaultAlign:"rb",initPlugin:function(b){if(b.ptype&&!a.isFunction(b.init)){b=a.PluginManager.createPlugin(b)}else{if(a.isString(b)){b=a.PluginManager.createPlugin({ptype:b})}}b.init(this);return b},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}if(this.bubbleEvents){this.enableBubble(this.bubbleEvents);delete this.bubbleEvents}},initFromDom:function(b){return{el:b}},beforerender:function(){},render:function(c,b){var d=this;if(c){c=a.getDom(c)}this.beforerender();if(this.rendered||this.fireEvent("beforerender",this)===false){return this}if(!c){if(this.el){c=(this.outerEl||this.el).parentNode}else{c=this.container||this.parentEl||document.body}}this.ownerDocument=c.ownerDocument;this.ownerWindow=c.ownerDocument.parentWindow;this.container=this.ownerWindow.Cms.getDom(c);if(this.ctCls){a.Node.addClass(this.container,this.ctCls);delete this.ctCls}this.onRender(this.container,b);this.rendered=true;if(this.autoShow){a.Node.removeClass(this.outerEl,this.hiddenClass)}if(this.cls){a.Node.addClass(this.outerEl,this.cls);delete this.cls}this.fireEvent("render",this);this.initContent();this.afterRender(this.container);this.fireEvent("afterrender",this);if(this.hidden){a.Node.addClass(this.outerEl,this.hiddenClass)}if(this.disabled){this.disable(true)}return this},updateContent:function(c,e,b){var d=this.getContentEl();if(d.innerHTML){this.ownerWindow.jQuery.cleanData(d.getElementsByTagName("*"))}if(this.contentTpl&&typeof c!=="string"){d.innerHTML=a.String.tmpl(this.contentTpl,c||{})}else{var f=a.isObject(c)?a.Dom.createHtml(c):c;a.Node.update(d,f,e,b)}},applyToMarkup:function(b){this.el=a.getDom(b);this.container=(this.outerEl||this.el).parentNode;this.ownerDocument=this.container.ownerDocument;this.ownerWindow=this.ownerDocument.parentWindow;this.$el=this.ownerWindow.$(this.el);this.render(this.container)},onRender:function(d,b){var e=this;var j,f;if(!d){d=this.container||document.body}else{this.ownerDocument=d.ownerDocument;this.ownerWindow=d.ownerDocument.parentWindow}var h=this.ownerDocument,g=this.ownerWindow;if(b!==undefined&&b!==null){if(a.isNumber(b)){b=d.children[b]}else{b=this.ownerWindow.Cms.getDom(b)}}if(!this.el&&this.outerElAttrs){if(this.outerElAttrs){if(typeof this.outerElAttrs=="string"&&!/<|&#?\w+;/.test(this.outerElAttrs)){this.outerEl=h.createElement(this.outerElAttrs)}else{j=h.createElement("div");f=this.initRenderData();var c=typeof this.outerElAttrs=="string"?this.outerElAttrs:a.Dom.createHtml(this.outerElAttrs);j.innerHTML=a.String.tmpl(c,f);this.outerEl=j.firstChild}}}if(this.outerEl){if(b){d.insertBefore(this.outerEl,b)}else{d.appendChild(this.outerEl)}if(j){a.Dom.removeNode(j);j=null}}if(this.renderTpl){f=this.initRenderData();this.outerEl.innerHTML=a.String.tmpl(this.renderTpl,f)}this.el=this.ownerWindow.Cms.getDom(this.getId());if(this.el&&!this.outerEl){this.outerEl=this.el}else{if(!this.el&&this.outerEl){this.el=this.outerEl}}if(!this.el.id){this.el.id=this.getId();this.el._components=this.el._components||{};this.el._components[this.ctype]=this.id}if(this.el!=this.outerEl){if(this.outerElIdPostfix){this.outerEl.id=this.el.id+this.outerElIdPostfix}this.$outerEl=this.ownerWindow.$(this.outerEl);this.$el=this.ownerWindow.$(this.el)}else{this.$outerEl=this.$el=this.ownerWindow.$(this.el)}if(this.baseCls){a.Node.addClass(this.outerEl,this.baseCls)}if(this.cmpCls){a.Node.addClass(this.outerEl,this.cmpCls);delete this.cmpCls}if(this.style){if(typeof this.style=="string"){this.outerEl.style.cssText=this.style}else{a.mix(this.outerEl.style,this.style)}delete this.style}},initContent:function(){var b=this.getContentEl();if(this.html){b.innerHTML=this.html;delete this.html}if(this.contentEl){var c=a.getDom(this.contentEl);a.Node.removeClass(this.hiddenClass);b.appendChild(c)}if(this.contentTpl){b.innerHTML=a.String.tmpl(this.contentTpl,this.contentRenderData||{});delete this.contentRenderData}},afterRender:function(b){if(this.height||this.width){this.setSize(this.width,this.height)}if(this.x!==undefined||this.y!==undefined){this.setPosition(this.x,this.y)}this.initDom()},applyRenderSelectors:function(){var d=this.domSelectors||{},c=this.outerEl,b;for(b in d){if(d.hasOwnProperty(b)){this[b]=$.find(d[b],c)}}},initDom:function(){this.applyRenderSelectors()},onResize:function(){},setSize:function(c,b){if(this.minWidth&&c<this.minWidth){c=this.minWidth}if(this.maxWidth&&c>this.maxWidth){c=this.maxWidth}if(this.minHeight&&b<this.minHeight){b=this.minWidth}if(this.maxHeight&&b>this.maxHeight){b=this.maxHeight}if(!this.rendered){this.width=(c!==undefined)?c:this.width;this.height=(b!==undefined)?b:this.height;return this}a.Node.setSize(this.outerEl,c,b);this.onResize(c,b);this.width=c;this.height=b;this.fireEvent("resize",this,c,b);return this},setPosition:function(b,c){if(!this.rendered){this.x=(b!==undefined)?b:this.x;this.y=(c!==undefined)?c:this.y;return this}a.Node.setPosition(this.outerEl,b,c);this.onPosition(b,c);this.x=b;this.y=c;this.fireEvent("move",this,b,c);return this},onPosition:function(){},getSize:function(){return a.Node.getSize(this.outerEl)},getId:function(){if(!this.id){var c=this.ctype.toLocaleLowerCase().replace(/\./g,"_"),b=a.rootWin.Cms.ComponentManager.idSeed;if(b[c]===undefined){b[c]=0}this.id="z-"+c+"-"+(++b[c])}return this.id},getItemId:function(){return this.itemId||this.getId()},getEl:function(){if(!this.el){this.el=(this.ownerWindow||window).Cms.getDom(this.id)}return this.el},getOuterEl:function(){return this.outerEl||this.el},getTargetEl:function(){return this.target||this.el},getContentEl:function(){return this.ownerWindow.Cms.getDom(this.id+"_body")||this.el},getBodyEl:function(){return this.ownerWindow.Cms.getDom(this.id+"_body")||this.el},getContainerEl:function(){return this.container||this.parentEl||(this.outerEl||this.el).parentNode},getOwnerCt:function(){return this.ownerCt},initRenderData:function(){this.renderData=this.renderData||{};return a.mixIf(this.renderData,{id:this.id,baseCls:this.baseCls,cmpCls:this.cmpCls,cls:this.cls})},focus:function(d,c){if(c){this.focusTask=new a.Util.DelayedTask(this.focus,this,[d,false]);this.focusTask.delay(a.isNumber(c)?c:16);return}if(this.rendered&&!this.isDestroyed){var b=this.getFocusEl?this.getFocusEl():this.el;if(Node.needsTabIndex(b)){b.tabIndex=-1}try{b.focus();if(d===true){b.select()}}catch(f){console.error(f)}}return this},blur:function(){if(this.rendered){var b=this.getFocusEl?this.getFocusEl():this.el;b.blur()}return this},disable:function(b){if(this.rendered){a.Node.addClass(this.outerEl,this.disabledClass);a.Node.disable(this.outerEl,this.maskOnDisable?true:false);this.outerEl.disabled=true}this.disabled=true;if(b!==true){this.fireEvent("disable",this)}return this},enable:function(b){if(this.rendered){a.Node.removeClass(this.outerEl,this.disabledClass);this.outerEl.disabled=false}this.disabled=false;if(b!==true){this.fireEvent("enable",this)}return this},isDisabled:function(){return this.disabled},setDisabled:function(b){return this[b?"disable":"enable"]()},show:function(){var b=this;if(this.fireEvent("beforeshow",this)===false){return this}this.hidden=false;if(this.autoRender){this.render(a.isBoolean(this.autoRender)?(document.body||document.documentElement):this.autoRender)}if(this.rendered){a.Node.removeClass(this.outerEl,this.hiddenClass);if(this.outerEl.currentStyle.display=="none"){a.Node.show(this.outerEl)}if(this.outerEl.currentStyle.visibility=="hidden"){this.outerEl.style.visibility=""}b.onShow.apply(b,arguments)}this.fireEvent("show",this);return this},onShow:a.noopFn,hide:function(){var b=this;if(this.fireEvent("beforehide",this)===false){return this}this.hidden=true;if(this.rendered){a.Node.addClass(this.outerEl,this.hiddenClass);if(this.outerEl.currentStyle.display!="none"){a.Node.hide(this.outerEl)}b.onHide.apply(b,arguments)}this.fireEvent("hide",this);return this},onHide:a.noopFn,setVisible:function(b){return this[b?"show":"hide"]()},isHidden:function(){return this.hidden},isVisible:function(){return this.rendered&&a.Node.isVisible(this.outerEl)},addClass:function(b){if(this.outerEl){a.Node.addClass(this.outerEl,b)}else{this.cls=this.cls?this.cls+" "+b:b}},removeClass:function(b){if(this.outerEl){a.Node.removeClass(this.outerEl,b)}else{if(this.cls){this.cls=this.cls.split(" ").remove(b).join(" ")}}return this},cloneConfig:function(c){c=c||{};var d=c.id||this.ctype+"_"+a.id();var b=a.mix(c,this.initialConfig);b.id=d;return b},findParentBy:function(b){var c=this.ownerCt;while(c&&!b(c,this)){c=c.ownerCt}return c||null},findParentByType:function(b){return a.isFunction(b)?this.findParentBy(function(c){return c.constructor===ctype}):this.findParentBy(function(c){return c.constructor.ctype===ctype})},clearListeners:function(){var c=this.events,d;for(var b in c){if(c.hasOwnProperty(b)){d=c[b];if(d.isEvent){d.clearListeners()}}}},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},destroy:function(f){if(this.isDestroyed===true){return}if(this.fireEvent("beforedestroy",this)===false){return}this.destroying=true;if(this.beforeDestroy){this.beforeDestroy()}if(this.ownerCt&&this.ownerCt.remove){this.ownerCt.remove(this,false);delete this.ownerCt}if(this.focusTask&&this.focusTask.cancel){this.focusTask.cancel()}if(this.onDestroy){this.onDestroy()}a.ComponentManager.unregister(this.id);this.fireEvent("destroy",this);if(this.clearListeners){this.clearListeners()}if(this.$el){this.ownerWindow.jQuery.cleanData(this.$el)}if(this.el&&(this.el.onclick||this.el.ondblclick)){this.el.onclick=this.el.ondblclick=null}if(this.$outerEl){this.ownerWindow.jQuery.cleanData(this.$outerEl)}if(this.outerEl&&(this.outerEl.onclick||this.outerEl.ondblclick)){this.outerEl.onclick=this.outerEl.ondblclick=null}var c;for(var d in this.dom){c=this.dom[d];if(c&&(c.nodeName||c.length)){a.getDom(c).ownerDocument.parentWindow.jQuery.cleanData(typeof c.length=="number"?c:[c])}}c=null;if(this.rendered&&this.el&&this.el.ownerDocument){var b=this.el.ownerDocument.parentWindow.Cms;if(b&&(f||this.removeDomOnDestroy)){b.Dom.removeNode(this.outerEl)}}if(this.deleteMembers){this.deleteMembers("parentEl","container","autoRender","defaultConfig","dom","el","$el","outerEl","$outerEl","targetEl","events","initialConfig","ownerDocument","ownerWindow","_parent")}this.destroying=false;this.isDestroyed=true},deleteMembers:function(){var c=arguments;for(var d=0,b=c.length;d<b;++d){delete this[c[d]]}},beforeDestroy:function(){},onDestroy:function(){}}})();
/*! Dialog */
(function(){var g=window.Cms,d=g.isIE,c=g.Page,e=g.Lang,b;var f=g.Cookie.get("cms_skin");if(f&&f!="cmsclassic"){g.importCss("resources/dialogskins/"+f.toLowerCase()+"/default.css")}b=function(h){this.defaultConfig={okText:e.get("Common.OK"),cancelText:e.get("Common.Cancel"),buttons:[],autoRender:g.rootDoc.body};if(!(this instanceof b)){return g.ComponentManager.getByDom(g.getDom(h),"Dialog")}if(h&&h.id&&b.list[h.id]){window.console&&console.warn("id为 "+h.id+" 的dialog已存在。");return b.list[h.id]}if(typeof h=="string"){if(arguments.length==4){h={title:arguments[0],url:arguments[1],width:arguments[2],height:arguments[3]}}else{if(/^https?:\/\/|^[a-z]+\:|\w+\.\w+((\?[\w=&+]*)*(#[\w=&+]*)*)$/.test(h)){h={url:h}}else{if(/^\w+\d*$/.test(h)){h={id:h}}else{h={html:h}}}}}b.superclass.constructor.call(this,h)};b.disableTimeout=2000;b.isHideScrollbar=false;b.isPreventScroll=true;var a="aui";b.htmlTemplate='<div class="{clsPrefix}_outer"><table class="{clsPrefix}_border"><tbody><tr><td class="{clsPrefix}_nw"></td><td class="{clsPrefix}_n"></td><td class="{clsPrefix}_ne"></td></tr><tr><td class="{clsPrefix}_w"></td><td class="{clsPrefix}_c"><div class="{clsPrefix}_inner"><table class="{clsPrefix}_dialog"><tbody><tr><td class="{clsPrefix}_header"><div class="{clsPrefix}_titleBar"><div class="{clsPrefix}_title"></div><a class="{clsPrefix}_close" href="javascript:/*close*/;">\xd7</a></div></td></tr><tr><td style="padding:0;"><div class="{clsPrefix}_icon"><div class="{clsPrefix}_iconBg"></div></div><div class="{clsPrefix}_main"><div class="{clsPrefix}_content"></div></div></td></tr><tr><td class="{clsPrefix}_footer"><div class="{clsPrefix}_buttons"></div></td></tr></tbody></table></div></td><td class="{clsPrefix}_e"></td></tr><tr><td class="{clsPrefix}_sw"></td><td class="{clsPrefix}_s"></td><td class="{clsPrefix}_se"></td></tr></tbody></table></div>';b.htmlTemplate=b.htmlTemplate.replace(/\{clsPrefix\}/g,a);b.buttonTemplate='<button class="z-dlg-button {cls}" id="{id}" onclick="{fn}">{text}</button>';var t=function(e){return Math.round(e-e*(.6*e-192+.03*1920-.03*e)/1600)};g.Class.extend(b,g.UICompBase,{id:null,ctype:"Dialog",baseCls:"z-dialog",url:"",title:"",width:null,height:null,minWidth:200,minHeight:60,top:"50%",left:"50%",onOk:null,onCancel:null,okText:e.get("Common.OK"),cancelText:e.get("Common.Cancel"),OKClass:"z-dialog-okbutton",cancelClass:"z-dialog-cancelbutton",onInit:null,onReady:null,onLoad:null,onClose:null,iconDataURL:null,message:"",showButtonRow:true,animator:true,resizable:false,modal:true,animateTarget:null,follow:null,followEl:null,closable:true,draggable:true,esc:true,autoClose:null,closeTip:"? 秒后自动关闭",padding:"20px 25px",html:'<div class="'+a+'_loading"><span>loading..</span></div>',zIndex:10100,fixed:!g.isMobile&&!g.isIE6,renderTpl:b.htmlTemplate,bottonTpl:b.buttonTemplate,highlightButtonCls:a+"_state_highlight",hidden:true,removeDomOnDestroy:true,autoShow:false,contentElClass:a+"_content",initComponent:function(){this.addEvents("move","beforeresize","activate","deactivate","beforeclose","close","afterclose");b.superclass.initComponent.apply(this);this.buttons=this.buttons||[];if(this.hidden===false){this.hidden=true;this.show()}this.opener=window;if(this.url){window.$D=this}},onRender:function(o,k){this.beforeRender();this.dom=this.dom||{};b.superclass.onRender.call(this,o,k);this.$el.css("position",this.fixed?"fixed":"absolute");var p=this.ownerWindow.Cms.getDom("z-dialog-proxy");if(!p){p=g.Dom.createNode({id:"z-dialog-proxy",className:"z-dlg-proxy"},this.ownerDocument);this.ownerDocument.body.appendChild(p)}this.proxy=this.ownerWindow.Cms.getDom(p);this.$proxy=this.ownerWindow.$(p);if(this.modal){var n=this.ownerWindow.Cms.getDom("_DialogShim");if(!n){n=this.ownerWindow.Cms.Dom.createNode({id:"_DialogShim",cls:"z-dlg-shim "+a+"_state_lock"},this.ownerDocument);this.ownerDocument.body.appendChild(n);if(g.isIE6){var m="Math.max(document.documentElement.scrollLeft, document.body.scrollLeft)",j="Math.max(document.documentElement.scrollTop, document.body.scrollTop)",h="(document.documentElement)";n.style.position="absolute";n.style.setExpression("left","eval("+m+') + "px"');n.style.setExpression("top","eval("+j+') + "px"')}else{n.style.position="fixed"}n.style.position=this.fixed?"fixed":"absolute"}this.shim=this.ownerWindow.Cms.getDom(n);this.$shim=this.ownerWindow.$(n);this.$shim.on("click",function(q){if(q.stopPropagation){q.stopPropagation()}else{q.cancelBubble=true}})}},beforeRender:function(){},initContent:function(){var h=this.getContentEl();if(this.html){h.innerHTML=this.html;delete this.html}if(this.contentEl){this.updateContent(this.contentEl)}if(this.tpl){h.innerHTML=g.String.tmpl(this.tpl,this.data||{});delete this.data}},updateContent:function(h,n,m){var q=this.getContentEl();if(h&&h.nodeType==1){this.contentEl=h;var j=this.ownerWindow.Cms.getDom(this.contentEl);var r=j.style.display,k=j.previousSibling,p=j.nextSibling,t=j.parentNode;var s=this;this._elemBack=function(){if(k&&k.parentNode){k.parentNode.insertBefore(j,k.nextSibling)}else{if(p&&p.parentNode){p.parentNode.insertBefore(j,p)}else{if(t){t.appendChild(j)}}}j.style.display=r;s._elemBack=null};g.Node.removeClass(j,this.hiddenClass);this.ownerWindow.jQuery.cleanData(q.getElementsByTagName("*"));q.innerHTML="";q.appendChild(j)}else{if(this.tpl&&typeof h!=="string"){this.ownerWindow.jQuery.cleanData(q.getElementsByTagName("*"));q.innerHTML=g.String.tmpl(this.tpl,h||{})}else{var o=g.isObject(h)?g.Dom.createHtml(h):h;g.Node.update(q,o,n,m)}}},afterRender:function(){this.dom={wrap:this.el,header:true,title:true,main:true,icon:true,iconBg:true,content:true,footer:true,buttons:true,close:true};var k=this.el.getElementsByTagName("*"),h=k.length;for(var j=0;j<h;j++){var m=k[j].className.split(a+"_")[1];if(m){m=m.split(" ")[0];if(m&&this.dom[m]){this.dom[m]=this.ownerWindow.Cms.getDom(k[j]);this.dom["$"+m]=this.ownerWindow.$(k[j])}}}if(this.closable===false){this.dom.$close.hide()}if(this.iconDataURL){if(g.isIE&&g.ieVersion<8&&this.iconStandin){this.dom.iconBg.innerHTML=this.iconStandin}else{this.dom.iconBg.style.backgroundImage="url("+this.iconDataURL+")"}}else{this.dom.$icon.hide()}this.dom.$title.css("cursor",this.draggable?"move":"auto");this.dom.$content.css("padding",this.padding);this.setTitle(this.title);this.initIframe();this.initButtons();this.setSize(this.width,this.height);if(this.autoClose){this.time(this.autoClose)}if(this.followEl){this.followTo(this.followEl)}else{this.setPosition(this.left,this.top)}this.initEvents();this.initResizable();this.initDraggable();if(this.onInit){this.onInit.call(this,window)}},_toNumber:function(h,k){if(!h&&h!==0||typeof h==="number"){return h}var j=h.length-1;if(h.lastIndexOf("px")===j){h=parseInt(h,10)}else{if(h.lastIndexOf("%")===j){h=parseInt(k*h.split("%")[0]/100,10)}}return h},followTo:function(h){var j=g.Dom.computePositionEx(h,this.el);Node.setPosition(this.el,j)},reposition:function(){this.setPosition("50%","50%")},setPosition:function(t,s){if(!this.rendered){this.x=(t!==undefined)?t:this.x;this.y=(s!==undefined)?s:this.y;return this}var m=g.isIE6?false:this.fixed,q=g.isIE6&&this.fixed,w=g.rootWin.document,h=g.Dom.getViewport(g.rootWin),r=h.width,k=h.height,n=Math.max(w.documentElement.scrollLeft,w.body.scrollLeft),z=Math.max(w.documentElement.scrollTop,w.body.scrollTop),p=m?0:n,j=m?0:z,u=Math.max(w.documentElement.scrollWidth,w.body.scrollWidth),o=Math.max(w.documentElement.scrollHeight,w.body.scrollHeight);if(t||t===0){this._x=t.toString().indexOf("%")!==-1?t:null;t=this._toNumber(t,r-this.el.offsetWidth);if(typeof t=="number"){t=q?(t+=n):t+p;this.$el.css("left",Math.max(t,p)+"px")}else{if(typeof t=="string"){this.$el.css("left",t)}}}if(s||s===0){this._y=s.toString().indexOf("%")!==-1?s:null;s=this._toNumber(s,k-this.el.offsetHeight);if(typeof s=="number"){s=q?(s+=z):s+j;this.$el.css("top",Math.max(s,j)+"px")}else{if(typeof s=="string"){this.$el.css("top",s)}}}this.onPosition(t,s);this.x=t;this.y=s;this.fireEvent("move",this,t,s);return this},onPosition:function(h,j){if(h!==undefined&&j!==undefined){this._autoPositionType()}},_autoPositionType:function(){this[this.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){if(g.isIE6){var o=g.rootDoc,n=parseInt(this.$el.css("left"),10)||0,m=parseInt(this.$el.css("top"),10)||0,j=Math.max(o.documentElement.scrollLeft,o.body.scrollLeft),h=Math.max(o.documentElement.scrollTop,o.body.scrollTop),p="Math.max(document.documentElement.scrollLeft, document.body.scrollLeft)",k="Math.max(document.documentElement.scrollTop, document.body.scrollTop)";this._setAbsolute();this.el.style.setExpression("left","eval("+(n+p)+') + "px"');this.el.style.setExpression("top","eval("+(m+k)+') + "px"')}else{this.el.style.position="fixed"}},_setAbsolute:function(){if(g.isIE6){this.el.style.removeExpression("left");this.el.style.removeExpression("top")}this.el.style.position="absolute"},_clickCancel:function(){if(this.onCancel){if(this.onCancel.call(this,window)!==false){this.close()}}else{this.close()}},_clickClose:function(){if(this.onBeforeClose){if(this.onBeforeClose.call(this,window)!==false){this.close()}}else{this.close()}},getTitle:function(){return this.dom.title.innerHTML},setTitle:function(h){if(h===undefined){h=this.title}else{this.title=h}if(this.title===false){this.dom.title.innerHTML="";this.dom.$title.hide();this.$el.addClass(a+"_state_noTitle")}else{this.dom.title.innerHTML=h;this.dom.$title.show();this.$el.removeClass(a+"_state_noTitle")}return this},initIframe:function(){if(!this.url){return}var j=this,h=j.ownerDocument.createElement("iframe");h.src=g.Url.relative2Absolute(j.url);h.id=h.name=j.id+"_dialog_frame";h.style.cssText="border:none 0;border-width: 0;width:100%;height:100%;";h.setAttribute("frameborder","0",0);h.setAttribute("ownerdialogid",j.id);j.dom.iframe=j.ownerWindow.Cms.getDom(h);j.dom.$content.addClass(a+"_state_full");j.dom.content.appendChild(h);j.innerFrame=h;j.innerWin=h.contentWindow;window.$D=j;window.$DW=h.contentWindow;h=null;j.onOk=j.onOk||j.onOK;if(typeof j.onOk=="function"){j._OKFn=j.onOk;j.onOk=function(k){if(j.okButton){j.okButton.disabled=true}j.enableOkButtonTimer=setTimeout(function(){if(j.okButton){j.okButton.disabled=false}},b.disableTimeout);return j._OKFn.call(j,k||window.event,j.innerWin)}}if(typeof j.onCancel=="function"){j._CancelFn=j.onCancel;j.onCancel=function(k){return j._CancelFn.call(j,k||window.event,j.innerWin)}}if(!g.isGecko){j.$innerFrame=j.ownerWindow.$(j.innerFrame);j.$innerFrame.on("load.dialog",function(){j.onIframeLoad.call(j)})}else{j.innerFrame.onload=function(){j.onIframeLoad.call(j)}}j.content=null;j.$content=null},onIframeReady:function(){this.dom.$loadingEl=this.dom.$content.find("."+a+"_loading");this.dom.$loadingEl.hide();if(this.onReady){this.onReady.call(this,this.innerWin);this.onReady=null}},onIframeLoad:function(){this.dom.$loadingEl=this.dom.$content.find("."+a+"_loading");this.dom.$loadingEl.hide();if(this.onLoad){this.onLoad.call(this,this.innerWin);this.onLoad=null}},getContentEl:function(){return this.dom.content||(this.dom.content=this.$el.find("."+this.contentElClass)[0])},initButtons:function(){var j=this;if(this.onOK&&!this.onOk){this.onOk=this.onOK}if(this.onOk){this.buttons.push({text:this.okText,fn:this.onOk,id:this.id+"-OKButton",cls:this.OKClass,focus:true})}if(this.onCancel){this.buttons.push({text:this.cancelText,fn:this._clickCancel,id:this.id+"-cancelButton",cls:this.cancelClass,focus:(this.onOk?false:true)})}if(this.buttons.length<1){this.dom.$buttons.hide()}else{for(var h=0;h<this.buttons.length;h++){this.addButton(this.buttons[h])}}},disableButton:function(h){this.ownerWindow.$("#"+h).disable()},enableButton:function(h){this.ownerWindow.$("#"+h).enable()},addButton:function(k,r,q,j,t,s){var m;if(typeof k!="object"){m={text:r,fn:q,id:(k||this.id+"-button"+this.buttons.length),cls:s||"",focus:!!t}}else{m=k}var o,p=this;if(this.dom&&this.dom.buttons){var n=p.ownerDocument.createElement("button");if(m.text){n.value=m.text;n.innerText=m.text}if(m.id){n.id=m.id;if(n.id==p.id+"-OKButton"){p.okButton=n}else{if(n.id==p.id+"-cancelButton"){p.cancelButton=n}}}if(m.cls){n.className="z-dlg-button "+m.cls}p.dom.buttons.appendChild(n);var h=p.ownerWindow.$(n);if(m.fn){h.on("click",$.proxy(m.fn,p))}if(m.focus){h.addClass(p.highlightButtonCls);setTimeout(function(){try{n.focus()}catch(u){}},1)}return this.dom.buttons[j?"lastChild":"firstChild"]}else{this.buttons[j?"push":"unshift"](m)}},initEvents:function(){var h=this;h.manager=h.manager||b.Manager;h.manager.register(h);h.dom.$close.on("mousedown",$.proxy(h._clickClose,h))},time:function(h){var j=this;if(this.closed){clearTimeout(this._timer);return}if(h){this.autoClose=h;this._timer=setTimeout(function(){j.time()},1000);return}this.autoClose--;if(this.title!==false){this.setTitle(this.closeTip.format(this.autoClose))}if(this.autoClose<=0){this._clickClose()}else{this._timer=setTimeout(function(){j.time()},1000)}},initResizable:function(){if(this.resizable){this.resizer=new g.Resizable({el:this.el,minWidth:200,minheight:100,handles:this.resizeHandles,resizeElement:this.resizerAction,handleCls:"z-window-handle"});this.beforerresize=function(){this.fireEvent("beforeresize")}}},initDraggable:function(){if(this.dom.header&&this.draggable&&g.rootWin.Cms.SimpleDrag){this.dd=new g.rootWin.Cms.SimpleDrag({dragEl:this.el,handleEl:this.dom.header,capture:true})}},content:function(h){if(h===undefined){return this.dom.content}if(typeof h=="string"){this.updateContent(h);return}if(g.isElment(h)){var n=h.style.display,m=h.previousSibling,k=h.nextSibling,j=h.parentNode;this._elemBack=function(){if(m&&m.parentNode){m.parentNode.insertBefore(h,m.nextSibling)}else{if(k&&m.parentNode){k.parentNode.insertBefore(h,k)}else{if(j){j.appendChild(h)}}}h.style.display=n};if(this.dom.content.innerHTML){this.ownerWindow.jQuery.cleanData(this.dom.content.getElementsByTagName("*"));this.dom.content.innerHTML=""}this.dom.content.appendChild(h);g.Node.show(h)}},onEsc:function(h){g.stopEvent(h);this._clickCancel()},setShimSize:function(){if(this.modal){var k=false;if(!g.Node.isVisible(this.shim)){k=true}if(k){this.$shim.css("visibility","hidden");this.$shim.show()}g.Node.setSize(this.shim,"100%","100%");var j=this.shim.offsetHeight;var h=g.Dom.getViewport(this.ownerWindow).height;if(h>j){g.Node.setSize(this.shim,undefined,h)}if(k){g.Node.hide(this.shim);this.$shim.css("visibility","visible")}}},onWindowResize:function(){this.setShimSize();this.doConstrain()},beforeShow:function(){},show:function(h){if(!this.rendered){this.render(this.autoRender)}if(this.hidden===false){this.toFront();return this}if(this.fireEvent("beforeshow",this)===false){return this}this.hidden=false;this.beforeShow();this.animateTarget=h||this.animateTarget;if(this.animateTarget){this.animShow()}else{this.afterShow()}if(this.modal){if(!g.Node.isVisible(this.shim)){this.setShimSize();if(this.animator){g.rootWin.Node.setOpacity(this.shim,3);this.$shim.show();this.$shim.fadeIn()}else{this.$shim.show()}}}return this},afterShow:function(h){this.$proxy.hide();this.$el.show();if(this.monitorResize||this.modal||this.constrain){if(g.rootWin.Cms.EventManager){g.rootWin.Cms.EventManager.onWindowResize(this.onWindowResize,this)}}this.doConstrain();this.doLayout();this.toFront();this.onShow();this.fireEvent("show",this)},animShow:function(){this.$proxy.show();g.Node.setBox(this.proxy,g.Node.getBox(this.animateTarget));g.Node.setOpacity(this.proxy,0);var h=this.getBox();this.$el.css("display","none");this.$proxy.animate(g.mix(h,{opacity:0.5}),this.afterShow)},onShow:g.noopFn,toFront:function(h){if(this.manager.bringToFront(this)){if(!h||!h.getTarget().focus){this.focus()}}return this},toBack:function(){this.manager.sendToBack(this);return this},setActive:function(k){if(k){var h=g.rootWin.Cms.Dialog.front,j=g.rootWin.Cms.Dialog.front.lastZIndex;this.setZIndex(j);if(this.modal&&this.shim){this.$shim.show()}this.addClass(a+"_state_focus");this.fireEvent("activate",this)}else{this.removeClass(a+"_state_focus");this.fireEvent("deactivate",this)}},hide:function(k,h,j){if(this.hidden||this.fireEvent("beforehide",this)===false){return this}if(h){this.on("hide",h,j)}this.hidden=true;if(this.modal){}this.animateTarget=k||this.animateTarget;if(this.animateTarget){this.animHide()}else{this.$el.hide();this.afterHide()}return this},afterHide:function(){this.$proxy.hide();if(this.monitorResize||this.modal||this.constrain){g.rootWin.Cms.EventManager.removeResizeListener(this.onWindowResize,this)}this.onHide();this.fireEvent("hide",this)},animHide:function(){g.Node.setOpacity(this.proxy,0.5);this.$proxy.show();var h=this.getBox(false);g.Node.setBox(this.proxy,h);this.$el.hide();this.$proxy.animate(g.mix(g.Node.getBox(this.animateTarget),{opacity:0}),this.afterHide)},onHide:g.noopFn,doConstrain:function(){if(this.container.nodeName=="BODY"){return}var m;if(this.constrain){var k=this.getSize();m={right:-(k.width-50),bottom:-(k.height-25)}}var p=g.Node.getConstrainToXY(this.el,this.container,true,m);if(p){var o=g.isIE6?false:this.fixed;if(o){var n=g.rootWin.document,h=Math.max(n.documentElement.scrollLeft,n.body.scrollLeft),j=Math.max(n.documentElement.scrollTop,n.body.scrollTop);p[0]=p[0]-h;p[1]=p[1]-j}this.setPosition(p[0],p[1])}},doLayout:g.noopFn,close:function(){if(this.isDestroyed===true){return}if(this.fireEvent("beforeclose",this)!==false){if(this.hidden){this.doClose()}else{this.hide(null,this.doClose,this)}}},doClose:function(){if(this.onClose){this.onClose.call(this,this.innerWin);this.onClose=null}this.fireEvent("close",this);this.destroy()},beforeDestroy:function(){if(this.enableOkButtonTimer){clearTimeout(this.enableOkButtonTimer)}if(this.rendered&&this.dom){this.destroyIframe();if(this.dom.$loadingEl){this.ownerWindow.jQuery.cleanData(this.dom.$loadingEl)}if(this.dom.$close){this.dom.$close.off()}this.okButton=this.cancelButton=null;this.ownerWindow.jQuery.cleanData(this.dom.buttons.getElementsByTagName("BUTTON"));this.buttons.length=0;if(this.proxy){this.$proxy=this.proxy=null}if(this.shim){this.$shim=this.shim=null}if(this.contentEl){delete this.contentEl}if(this.dd&&this.dd.proxyEl){g.rootWin.Cms.Dom.removeNode(this.dd.proxyEl)}if(this._elemBack){this._elemBack();this._elemBack=null}}},destroyIframe:function(){var h=this;if(!h.dom||!h.dom.iframe){return}window.$DW=null;h.innerWin=h.innerDoc=null;if(!g.isGecko){h.$innerFrame.off("load.dialog")}else{h.innerFrame.onload=null}h.innerFrame.src="about:blank";g.Dom.removeNode(h.dom.iframe);h.$innerFrame=h.innerFrame=null},onDestroy:function(){if(this.dd){this.dd.destroy();delete this.dd}if(this.manager){this.manager.unregister(this)}this._CancelFn=this._OKFn=this.onOk=this.onOK=this.onCancel=this.onLoad=this.onReady=this.onClose=null;b.superclass.onDestroy.call(this)},setZIndex:function(h){if(h===undefined){h=this.zIndex}if(this.modal){this.$shim.css("z-index",h)}this.el.style.zIndex=(++h);this.zIndex=h;h+=5;this.lastZIndex=h;return this},setSize:function(j,k){this.onSetSize(j,k)},onSetSize:function(j,k){if(this.url){j=j||"61.8%";k=k||"61.8%"}this.dom.$main.css("min-width",this.minWidth+"px");if(g.isIE6||g.isIE7||(document.documentMode&&document.documentMode<8)){this.dom.$main.css("width",this.minWidth+"px")}if(j){this._width=j.toString().indexOf("%")!==-1?j:null;var n=g.Dom.getViewport(g.rootWin).width-this.el.offsetWidth+this.dom.main.offsetWidth;j=this._toNumber(j,n);if(typeof j=="number"){this.$el.css("width","auto");this.dom.$main.css("width",Math.max(this.minWidth,j)+"px");this.$el.css("width",this.el.offsetWidth+"px")}else{if(typeof j=="string"){this.dom.main.style.width=j;if(j=="auto"){this.$el.css("width","auto")}}}}if(k){this._height=k.toString().indexOf("%")!==-1?k:null;var m=g.Dom.getViewport(g.rootWin).height-this.el.offsetHeight+this.dom.main.offsetHeight;k=this._toNumber(k,m);if(typeof k=="number"){this.dom.$main.css("height",Math.max(this.minHeight,k)+"px")}else{if(typeof k=="string"){this.dom.$main.css("height",k)}}}this.fireEvent("resize",this);return this},dragstart:function(h){h.proxy=this.proxy}});g.mix(b.prototype,{shake:function(){var h=this.el.style,k=[4,8,4,0,-4,-8,-4,0],j=function(){h.marginLeft=k.shift()+"px";if(k.length<=0){h.marginLeft=0;clearInterval(timerId)}};k=k.concat(k.concat(k));timerId=setInterval(j,13);return this}});g.mix(b,{alert:function(k,j,h){var n=Math.max(Math.min(12*String(k).replace(/<[^>]+>/g,"").length+100,t($window.width())),300);if(h===false){return b.warn(k,j)}return new b({width:n,autoShow:true,iconDataURL:"data:image/gif;base64,R0lGODlhIgAiANUAAAAAAP///+X4jO36r/H7w6C8FqK+GKTAGqXBG6bCHKfDHajEHqvHIa3JI7DMJrPPKbbSLLjULrvXMb3ZM7/bNcHdN8PfOcfjPczoQs3pQ8/rRdLuSNPvSdXxS9j0TtfzTdn1T9z2V932Xt32ZOD2cuT4eeX4huv6oe/6tf+nEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAiACIAAAb/wJRwSBwSBgQU6kgoOp9Fwmn0CVmvn9GpCe0STJ+sVTQaiazUj4nbJaLCpNDI89FgMJqPZxQihVFtQyYgHiEiHRUOBwiMCAcOFR1nHiAmgSUfJCMcEguNBgcHBo0LEhwjfiVdJWgZDY0IBhAbGxCjjQ0ZfCGqTgIgmhcKsAkQRBAJsAoXqCACUXojGcOwBx1EHYvKunRsKWAhHAywjNbY2rAMHCFqRpkiFOSMBcZDEAXyCBQiflwnVh2oyTMQoUOHCLfkKehg5YSQMiMq5PtkoOJERhUgpiBQxYODi6BCibrooNCHI1Y+oCOXwIJBgxaS5TtQJQQSQxou0iSi8qKGxTNJ5GDQeW1ItosY+CgRSvQcUqUEcDY1upLczxAo2VVtZI7qRJpWkHT8OLOokKP5SrJrAlFiWaf5MpYR8i9EwLdeFTIM4XDju3jyup7dqo/fSUFVxAU2mwJtunXt3O2ZRk5w46oKuB0m8iuYQEcfeK5c1uyZE1ZyXHF9MKH1hAfocu3q9QSTJk6eYlXczajUqVSBBhU6lGjlo0iTKgUS8iaTHDp28ETr82e5ETBiDJU5IyfMGutRptS8wk6LN/BRkChhYj0IADs=",iconStandin:"i",html:""+k,cancelText:e.get("Common.OK"),onCancel:function(){if(j){j()}}})},warn:function(j,h){var n=Math.max(Math.min(12*String(j).replace(/<[^>]+>/g,"").length+100,t($window.width())),300);return new b({width:n,autoShow:true,iconDataURL:"data:image/gif;base64,R0lGODlhIgAiAOYAAAAAAP/////58v/Ysv/ZtP/atv/cuf/dvP/hw//mzf/p0//t2//v3//x4//z5//06f/37//48f/Sqf/Sqv/Vrv/Wr//WsP/Ztf/ev//fwP/gwv/hxP/q1v/r2P/w4v/y5v/17P/27v/Kn//LoP/Ppf/38P+/kP/FmP/Gmf+5iP+8jP+iaf+qc/+uef+xfv98NP+DP/+LSf+TVP+UVv+aXv9VAP9XAv9YBP9bCP9eDf9jE/9kFv9mF/9nGf9oHf9uIv90Kv9zLf93Lv94NP+KUP+MU/+SW/+mef+sg/+0jv+1kP/CpP/Msv/Pt//dzP/u5f/z7f/ezv///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFIALAAAAAAiACIAAAf/gFKCg4SFhoeIiYQRCAMIEYqRhwsDlY6SmIIQlhaVD5mSGpUnIpUYoIoOlRQ9OSSVDaiIB5U0NTUxlQWyhgyVIji3NiaVHbyDApYwt7dClhDHUgqVKczMLpUaxyCWP0RRglFEPRSVDrwZlSw1SoRKNTSVB7IflRM6NUyETDU4pQOxQBmoJOOWvkH8cOkCRWkAihu3khBKIozYAA6YNlV6wQwJISTMgFgKIanRABfWihAqYo1FtkgPKlnoYW3IE0FPhljjUW7AuUQYKq2wVsMHOClRfBCNN2AeogaVSOQgumOJoCU7iPqrxABRgUoxiN46AgXKEbE1YFQicIhDJRM2gtDKtaaiEkZC3CoBmcu3hshKIAilG7AObRAngpoEketyQIZBqgbck2uEkBG5OiaYE0RrgC3KlufOkCfF1wBgcw8LcrJY7tYBDBJUatG3NrMWlRKYrlRhhO/fwIML/y2Bq5TBlpIrX87c0oVBDDY0n079godDJbJr3869+/Zo4MMjCgQAOw==",iconStandin:"!",html:""+j,cancelText:e.get("Common.OK"),onCancel:function(){if(h){h()}}})},confirm:function(k,j,h){var n=Math.max(Math.min(12*String(k).replace(/<[^>]+>/g,"").length+100,t($window.width())),300);return new b({width:n,autoShow:true,iconDataURL:"data:image/gif;base64,R0lGODlhIgAiANUAAAAAAP/////Wff/Wfv/Zhv/aiv/cjv/vzf/x0/2oBP6pBf+qBv+qB/+rCv+tD/+uEf+vFv+yGv+yHv+1JP+2J/+2Kf+3Kv+6Nv+/RP/CSv/FVf/HWv/IXf/Obf/Sev/SfP/Tff/Vfv/Yhv/Xh//Zjf/bk//cl//dmv/enf/foP/go//hp//jrP/krf/ms//ouv/qwP/sxv/sx//z2v/LaP/alP/14////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADcALAAAAAAiACIAAAb/wJtwSBweYDMEYgY7FJ/Q4kG2Mq2uWKvMGe0eXiZTS5VSXcmqVvjF7RIRYVdqdUKNPJ4R6rRKucIIbkMvKidlJRwWCguMCwoWHCVkJyovgn8uKyQZD40JjJ+MDxkkK5hdmWYgE40LDhiwGBcOjRMgK2YuUC4qmR2djA0lUDUMoh2mvVImfCDACwwxXSzGCw+3JyZtN2ApJBGtNIIajREkKSaWQgcmvButCzZENRg1RCytG73aQlQpJc8WQCBig5EEgq0elJgjQ8iKFis4wGMAAdYHDNBYEKEBj8PDFTfYFaIAryQDjUQkwKNASRuMPigWlWx0sghHeApQzEGCa8TMzFb2iFT4OcJMkisefjJyUGToTw9XlCBVuiAEEQNUoa5Y0pPqACICqBZdwQSmzJkiiIhQmnOnyBMkf5ogYkIpSxX8PkqkypeRR4j9+gDsS1Uhw3XtVLybSYAIgZ/6/rTp9o2x45nm0KlD3Cwgo8ZDHsO7RocfEV6+PBcgUmA0MtS7cK1Y1ehs7Vq3cqFqp4lTYVKm2gkiZEgFIkWtHkWaVEmQEDjt5tS5k2dPnz8mAjlfB0YMmjNl1KTbtj0kFStYrmghX57IkSRLmmwPAgA7",iconStandin:"?",html:k,onOk:function(){if(!j){return this.close()}if(j.call(this,window)!==false){this.close()}},onCancel:h||g.noopFn})},prompt:function(m,k,h){var n=Math.max(Math.min(12*String(m).replace(/<[^>]+>/g,"").length+100,t($window.width())),300);h=h||"";var j;return new b({width:n,autoShow:true,html:['<div style="margin-bottom:5px;font-size:12px">',m,"</div>","<div>",'<input type="text" value="',h||"",'" style="width:18em;padding:3px 2px" />',"</div>"].join(""),onShow:function(){j=this.dom.$content.find("input")[0];j.select();j.focus()},onOk:function(n){return k&&k.call(this,j.value,n)}})},tips:function(j,h){var n=Math.max(Math.min(12*String(j).replace(/<[^>]+>/g,"").length+100,t($window.width())),300);return new b({width:n,autoShow:true,title:false,modal:false,html:'<div style="padding: 0 1em;">'+j+"</div>",autoClose:h||2})},WaitID:null,wait:function(j){var n=0,k,i=Math.max(Math.min(12*String(j).replace(/<[^>]+>/g,"").length+100,t($window.width())),300);var m=new b({width:i,autoShow:true,html:j,onCancel:function(){return false}});var h=function(){if(!m||m.destroying===true){if(k){clearTimeout(k)}return}n++;m.cancelButton.innerText=e.get("Dialog.WaitMessage")+"("+n+")...";m.waitTimer=k=setTimeout(h,1000)};m.waitTimer=k=setTimeout(h,1000);m.on("beforeclose",function(){clearTimeout(k)});return m},getInstance:function(h){return b.Manager.get(h)}});b.list={};b.accessList=[];b.front=null;if(window!=g.rootWin){b.list=g.rootWin.Cms.Dialog.list;b.accessList=g.rootWin.Cms.Dialog.accessList;b.front=g.rootWin.Cms.Dialog.front}b.Manager=function(){var o=function(q){if(b.accessList.length==1){b.front=g.rootWin.Cms.Dialog.front=q}};var p=function(s){if(b.isHideScrollbar){var r=g.rootDoc.getElementsByTagName(g.rootDoc.compatMode=="BackCompat"?"BODY":"HTML")[0];r._styleOverflow=r.style.overflow;if(!d){var q=r.scrollTop;r.style.overflow="hidden";r.scrollTop=q}else{r.style.overflow="hidden"}}if(b.isPreventScroll){Event.lockScroll()}};var h=function(s){if(b.accessList.length<2){if(g.rootWin.Cms.getDom("_DialogShim")){g.rootWin.$("#_DialogShim").hide()}if(b.isHideScrollbar){var r=g.rootDoc.getElementsByTagName(g.rootDoc.compatMode=="BackCompat"?"BODY":"HTML")[0];if(r._styleOverflow!==undefined){if(!d){var q=r.scrollTop;r.style.overflow=r._styleOverflow;r.scrollTop=q}else{r.style.overflow=r._styleOverflow}}}Event.unlockScroll()}Event.unlockScroll()};var k=function(r,q){return(!r._lastAccess||r._lastAccess<q._lastAccess)?-1:1};var n=function(){var s=b.accessList,q=s.length;if(q>0){s.sort(k);var r=s[0].manager.zseed;for(var t=0;t<q;t++){var u=s[t];if(u&&!u.hidden){u.setZIndex(r+(t*10))}}}j()};var m=function(q){if(q!==g.rootWin.Cms.Dialog.front){if(g.rootWin.Cms.Dialog.front){g.rootWin.Cms.Dialog.front.setActive(false)}b.front=g.rootWin.Cms.Dialog.front=q;if(q){q.setActive(true)}}};var j=function(){for(var q=b.accessList.length-1;q>=0;--q){if(!b.accessList[q].hidden){m(b.accessList[q]);return}}m(null)};return{zseed:10100,listenKeydown:function(q,s){q=g.getEvent(q);var r=q.target;if(q.keyCode==27){if(s&&s.ctype=="dialog"){if(r.nodeName&&/^textarea$/i.test(r.nodeName)&&r.defaultValue!=r.value&&r.value.length>2&&!confirm("侦测文本框中的内容已经被修改，你确定要放弃修改吗？")){return}s.onEsc(q)}else{if(g.rootWin.Cms.Dialog.front&&g.rootWin.Cms.Dialog.front.esc){g.rootWin.Cms.Dialog.front.onEsc(q)}}}},closeAll:function(q){if(b.accessList.length>0){b.accessList.each(function(r){if(q){if(r.opener==window){r.close()}}else{r.close()}});return true}return false},register:function(q){b.list[q.id]=q;b.accessList.push(q);q.on("hide",j);q.on("show",p);q.on("beforeclose",h)},unregister:function(q){delete b.list[q.id];q.un("hide",j);q.un("show",p);q.un("beforeclose",h);b.accessList.remove(q)},get:function(q){return typeof q==="object"?q:b.list[q]},bringToFront:function(q){q=this.get(q);if(q!=g.rootWin.Cms.Dialog.front){q._lastAccess=new Date().getTime();n();o(q);return true}return false},sendToBack:function(q){q=this.get(q);q._lastAccess=-(new Date().getTime());n();return q},getActive:function(){return g.rootWin.Cms.Dialog.front}}}();c.onReady(function(){if(g.restricted||!window.frameElement){return}var h;try{h=window.frameElement.getAttribute("ownerdialogid")}catch(k){window.console&&console.error("没有权限：可能因为跨域，对话框不能与父窗口交互。")}if(!h){return}if(g.Misc&&g.Misc.inputFocus){g.Misc.inputFocus()}var j;if(g.Config.namespace=="window"){j=g.rootWin.Dialog.list[h]}else{j=g.rootWin.Cms.Dialog.list[h]}if(!j){return}window.ownerDialog=j;window.dialogOpener=j.opener;if(j.getTitle()===""&&document.title){if(j.title!==false){j.setTitle(document.title)}}if(j.onIframeReady){j.onIframeReady(window);j.onIframeReady=null}},4);$document.on("keydown",b.Manager.listenKeydown);$window.on("unload",function(){$document.off("keydown",b.Manager.listenKeydown);b.Manager.closeAll(true);window.ownerDialog=window.dialogOpener=null;if(window==g.rootWin){$("#_DialogShim").off()}});g.Dialog=b})();(function(){var f=window.Cms;f.$G=f.getDom;f.$T=f.getByTag;f.$N=f.getByName;if(f.Node){f.$V=f.Node.getValue;f.$S=f.Node.setValue}f.$NV=f.getValues;f.$NS=f.setValues;f.$F=f.getForm;if(!f.Config.namespace||f.Config.namespace==="window"){var b,h=[];var g=/^(\$|Object|Class|Array|Date|Function|String|Node|Event|JSON|Storage|Comment)$/;for(b in f){if(typeof(f[b])==="undefined"||/^(id|g)$/.test(b)){continue}if(typeof(window[b])!=="undefined"){if(!g.test(b)){h.push("retouch.js -- "+b+" existed in window")}else{if(g.test(b)&&typeof(f[b])==="object"){f.mixIf(window[b],f[b])}}}else{try{window[b]=f[b]}catch(e){throw e}}}if(h.length&&f.Console){f.Console.silence=true;f.Console.error(h.join("<br>"))}}else{if(f.Config.namespace!=="Cms"){window[f.Config.namespace]=f}}if(!window.console.dir){window.console.dir=function(n){if(!/object/.test(Object.prototype.toString.call(n))){return console.log("console can`t dir the arg")}for(var m in n){console.log(m,": ",n[m])}}}if(f.Config.ignoreErrors=="true"){window.onerror=function(){return false}}$window.on("unload",function(){if(f.ComponentManager){f.ComponentManager._unload()}if(f.AllDocumentsEvent){f.AllDocumentsEvent._unload()}var m=jQuery.cache;var o,n=[];for(var p in jQuery.cache){if(m[p].handle&&(o=m[p].handle.elem)){if(o.nodeName&&o.nodeType==1){n.push(o)}}}n=null;f.rootWin=f.rootDoc=null;$document.off();$window.off()});var k=f.Cookie.get("cms_skin");if(k){var j=document.getElementsByTagName("link");for(var d=0,c=j.length;d<c;d++){var a=j[d].href;if(a&&a.endsWith(f.CONTEXTPATH+"style/default.css")){f.Config.skin=k;f.importCSS("../style/"+k+"/default.css");break}}}})();Cms.Skin={};Cms.Skin.Supported="cmsclassic,cmsgreen,cmsdeep,cmspurple,cmsred";Cms.Lang=Cms.Lang||{};Cms.Lang.Supported="en,zh-cn,zh-tw";Cms.Lang.DefaultLanguage="zh-cn";